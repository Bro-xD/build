import{a1 as c,h as m,d as b,a2 as y,a3 as s}from"./Bsa_4GQg.js";import{l as _}from"./Bp9rt8M4.js";import{i as h}from"./DhVtWg_X.js";function E(e,r,l=r){var n=c();_(e,"input",a=>{var u=a?e.defaultValue:e.value;if(u=i(e)?o(u):u,l(u),n&&u!==(u=r())){var v=e.selectionStart,t=e.selectionEnd;e.value=u??"",t!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(t,e.value.length))}}),(m&&e.defaultValue!==e.value||b(r)==null&&e.value)&&l(i(e)?o(e.value):e.value),y(()=>{var a=r();i(e)&&a===o(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function i(e){var r=e.type;return r==="number"||r==="range"}function o(e){return e===""?null:+e}function d(e,r,l){if(e.multiple)return q(e,r);for(var n of e.options){var a=f(n);if(h(a,r)){n.selected=!0;return}}(!l||r!==void 0)&&(e.selectedIndex=-1)}function S(e,r){s(()=>{var l=new MutationObserver(()=>{var n=e.__value;d(e,n)});return l.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function M(e,r,l=r){var n=!0;_(e,"change",a=>{var u=a?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(u),f);else{var t=e.querySelector(u)??e.querySelector("option:not([disabled])");v=t&&f(t)}l(v)}),s(()=>{var a=r();if(d(e,a,n),n&&a===void 0){var u=e.querySelector(":checked");u!==null&&(a=f(u),l(a))}e.__value=a,n=!1}),S(e)}function q(e,r){for(var l of e.options)l.selected=~r.indexOf(f(l))}function f(e){return"__value"in e?e.__value:e.value}export{M as a,E as b};
