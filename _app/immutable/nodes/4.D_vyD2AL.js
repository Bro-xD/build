import{t as p,a as d}from"../chunks/Bk3dLcJt.js";import{T as qe,U as q,f as e,V as we,$ as ke,W as a,X as l,Y as s,Z as D,_ as G,j as Ce,y as x,O as oe,a0 as $e}from"../chunks/Bsa_4GQg.js";import{d as Ne,s as J}from"../chunks/Bp9rt8M4.js";import{i as b}from"../chunks/BAP5vBNY.js";import{c as X}from"../chunks/DYzU1syz.js";import{h as je,r as Re}from"../chunks/L50XnRMH.js";import{r as R}from"../chunks/JnzBcnuV.js";import{b as j,a as Se}from"../chunks/pyvEHeHq.js";import{p as F}from"../chunks/DhVtWg_X.js";import{o as Oe}from"../chunks/BHaOnMAo.js";import{C as Te,T as Z,G as Pe}from"../chunks/CdNFVXU2.js";import{O as ze}from"../chunks/EJ_dSDD7.js";import"../chunks/BkVOwsH9.js";import{a as le}from"../chunks/CbRLPrcj.js";import{u as se}from"../chunks/CaF-226v.js";import{g as ne}from"../chunks/B3YMYYCq.js";async function Ee(C,i,o){try{const f=await le.post("api/login",{json:{username:e(i),password:e(o)}}).json();f.success?(se.set(JSON.stringify(f.user)),ne("/profil",{replaceState:!0})):alert("Nom dâ€™utilisateur ou mot de passe incorrect")}catch(f){console.error("Erreur lors de la connexion:",f),alert("Erreur lors de la connexion")}}function Le(C,i){x(i,1)}function Me(C,i,o,f){x(i,(e(i)+1)%o.length),x(f,F(o[e(i)]))}function Be(C,i,o,f){x(i,(e(i)-1+o.length)%o.length),x(f,F(o[e(i)]))}var De=p('<span class="text-underline text-xl font-bold border-b border-gray-400 w-max  svelte-10yqqhl"> </span>'),Ue=p('<span class="text-underline text-xl font-bold border-b border-gray-400 w-max  svelte-10yqqhl">CONNEXION</span> <p class="text-gray-600 text-xl">Chaisissez votre nom de rÃ©fugiÃ© et votre cle de refuge</p>',1),Ve=p('<p class="text-gray-600 text-xl">Choisis un nom de rÃ©fugiÃ© et une cle de refuge</p>'),Ae=p('<p class="text-gray-600 text-xl">Choisis le profils qui te correspond le mieux (ou pas)</p> <p class="text-xs">(Clique gauche pour tourner autour, clique droit pour deplacer la vue, scroll pour zoomer/dÃ©zoomer)</p>',1),Ge=p('<p class="text-gray-600 text-xl">CrÃ©er votre refuge</p>'),Je=p('<div><div class="flex flex-col gap-5 w-full"><div class="flex flex-col gap-2"><label for="username" class="svelte-10yqqhl">Votre nom de RÃ©fugiÃ©</label> <input class="toon-input svelte-10yqqhl" type="text" placeholder="Nom de RÃ©fugiÃ©"></div> <div class="flex flex-col gap-2"><label for="password" class="svelte-10yqqhl">La cle de votre refuge</label> <input class="toon-input svelte-10yqqhl" type="password" placeholder="Cle de refuge"></div></div> <div class="flex justify-between mt-4"><button class="toon-button svelte-10yqqhl">Se connecter</button> <button class="toon-button svelte-10yqqhl">CrÃ©er un nouveau compte</button></div></div>'),Xe=p('<div class="flex flex-col gap-5 w-full"><div class="flex flex-col gap-2"><label for="username" class="svelte-10yqqhl">Votre nom de RÃ©fugiÃ©</label> <input class="toon-input svelte-10yqqhl" type="text" placeholder="Nom de RÃ©fugiÃ©"></div> <div class="flex flex-col gap-2"><label for="password" class="svelte-10yqqhl">La cle de votre refuge</label> <input class="toon-input svelte-10yqqhl" type="password" placeholder="Cle de refuge"></div></div>'),Ze=p("<!> <!> <!> <!>",1),Fe=p('<div class="flex flex-col gap-5"><div class="w-full h-[300px] flex justify-center border border-gray-400 rounded items-center relative"><!> <button class="toon-button absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 hover:text-gray-500  shadow-md p-2 rounded-full text-gray-400 svelte-10yqqhl"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <button class="toon-button absolute right-4 top-1/2 -translate-y-1/2 bg-white/80  hover:text-gray-500  shadow-md p-2 rounded-full text-gray-400 svelte-10yqqhl"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div></div>'),He=p(`<div class="flex flex-col gap-5 w-full"><div class="flex flex-col gap-2"><label for="refugeName" class="svelte-10yqqhl">Nom de votre refuge</label> <input class="toon-input svelte-10yqqhl" type="text" placeholder="Nom de refuge"></div> <div class="flex flex-col gap-2"><label for="vibe" class="svelte-10yqqhl">Ton Ã©tat d'esprit en entrant dans le refuge</label> <div class="relative w-max"><select class="toon-input appearance-none svelte-10yqqhl"><option disabled selected>Choisis un thÃ¨me</option><option>ðŸŽ­ Dramatique</option><option>ðŸ˜‚ Humoristique</option><option>ðŸ˜” MÃ©lancolique</option><option>ðŸ˜¬ Cringe</option><option>ðŸ§˜ Zen</option></select> <div class="absolute right-3 top-3 text-gray-500 pointer-events-none"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div> <div class="flex flex-col gap-2"><label for="story" class="font-medium svelte-10yqqhl">Un fragment de toi Ã  partager ?</label> <textarea id="story" class="toon-input min-h-[100px] svelte-10yqqhl" placeholder="Tu peux Ã©crire ce que tu ressens, ce que tu fuis, ou ce que tu espÃ¨res..."></textarea></div></div>`),We=(C,i)=>oe(i,-1),Ye=p('<button class="toon-button svelte-10yqqhl"> </button>'),Ie=(C,i,o)=>{e(i)===3?o():oe(i)},Ke=p('<div class="flex"><!> <span class="flex-grow"></span> <button class="toon-button svelte-10yqqhl"> </button></div>'),Qe=p('<div class="w-screen h-screen overflow-auto flex justify-center items-center pb-2"><div class="flex flex-col gap-5 w-[500px] max-w-[500px] max-h-[500px] "><div class="flex flex-col gap-5"><!> <!> <!> <!> <!></div> <!> <!> <!> <!> <!></div></div>');function gt(C,i){qe(i,!0);let o=q(0);const f=["/avatars/character-female-a.glb","/avatars/character-female-b.glb","/avatars/character-male-a.glb","/avatars/character-male-b.glb"];let S=q(""),O=q("drama"),T=q(""),U=q(0),P=q(F(f[e(U)])),z=q(""),E=q(""),L=q(""),M=q("");async function ie(){const t={username:e(z),password:e(E),avatar:e(P),refugeName:e(S),vibe:e(O),story:e(T)};try{const r=await le.post("api/create/refuge",{json:t}).json();console.log("Refuge crÃ©Ã© !",r),se.set(JSON.stringify(r)),ne("/profil",{replaceState:!0})}catch(r){console.error("Erreur lors de la crÃ©ation du refuge :",r)}}const H={1:{next:"Suivant",prev:""},2:{next:"Suivant",prev:"PrÃ©cÃ©dent"},3:{next:"CrÃ©er le refuge",prev:"PrÃ©cÃ©dent"}};let ve=Ce(()=>e(o)===1?e(z).trim()!==""&&e(E).trim()!=="":e(o)===2?!0:e(o)===3?e(S).trim()!==""&&e(O)!==""&&e(T).trim()!=="":!1);Oe(()=>{});var V=Qe();je(t=>{ke.title=" Inscription "});var W=l(V),A=l(W),Y=l(A);{var ue=t=>{var r=De(),n=l(r);s(r),D(()=>J(n,`Etape ${e(o)??""}`)),d(t,r)};b(Y,t=>{e(o)>0&&t(ue)})}var I=a(Y,2);{var ce=t=>{var r=Ue();G(2),d(t,r)};b(I,t=>{e(o)==0&&t(ce)})}var K=a(I,2);{var de=t=>{var r=Ve();d(t,r)};b(K,t=>{e(o)==1&&t(de)})}var Q=a(K,2);{var pe=t=>{var r=Ae();G(2),d(t,r)};b(Q,t=>{e(o)==2&&t(pe)})}var fe=a(Q,2);{var _e=t=>{var r=Ge();d(t,r)};b(fe,t=>{e(o)==3&&t(_e)})}s(A);var ee=a(A,2);{var me=t=>{var r=Je(),n=l(r),c=l(n),v=a(l(c),2);R(v),s(c);var _=a(c,2),u=a(l(_),2);R(u),s(_),s(n);var m=a(n,2),g=l(m);g.__click=[Ee,L,M];var h=a(g,2);h.__click=[Le,o],s(m),s(r),D(()=>g.disabled=!e(L)||!e(M)),j(v,()=>e(L),y=>x(L,y)),j(u,()=>e(M),y=>x(M,y)),d(t,r)};b(ee,t=>{e(o)===0&&t(me)})}var te=a(ee,2);{var ge=t=>{var r=Xe(),n=l(r),c=a(l(n),2);R(c),s(n);var v=a(n,2),_=a(l(v),2);R(_),s(v),s(r),j(c,()=>e(z),u=>x(z,u)),j(_,()=>e(E),u=>x(E,u)),d(t,r)};b(te,t=>{e(o)==1&&t(ge)})}var re=a(te,2);{var xe=t=>{var r=Fe(),n=l(r),c=l(n);Te(c,{class:" bg-gray-800 rounded-xl border shadow-md",children:(u,m)=>{var g=Ze(),h=$e(g);X(h,()=>Z.AmbientLight,(w,k)=>{k(w,{intensity:.6})});var y=a(h,2);X(y,()=>Z.DirectionalLight,(w,k)=>{k(w,{position:[2,2,5],intensity:1})});var N=a(y,2);X(N,()=>Z.PerspectiveCamera,(w,k)=>{k(w,{fov:25,makeDefault:!0,position:[0,1.5,3],children:($,et)=>{ze($,{target:[0,.9,0],autoRotate:!0,autoRotateSpeed:5})},$$slots:{default:!0}})});var B=a(N,2);Pe(B,{get url(){return e(P)},scale:1,position:[0,.5,0]}),d(u,g)},$$slots:{default:!0}});var v=a(c,2);v.__click=[Be,U,f,P];var _=a(v,2);_.__click=[Me,U,f,P],s(n),s(r),d(t,r)};b(re,t=>{e(o)==2&&t(xe)})}var ae=a(re,2);{var he=t=>{var r=He(),n=l(r),c=a(l(n),2);R(c),s(n);var v=a(n,2),_=a(l(v),2),u=l(_),m=l(u);m.value=((m.__value="")==null,"");var g=a(m);g.value=(g.__value="drama")==null?"":"drama";var h=a(g);h.value=(h.__value="humor")==null?"":"humor";var y=a(h);y.value=(y.__value="melancholy")==null?"":"melancholy";var N=a(y);N.value=(N.__value="cringe")==null?"":"cringe";var B=a(N);B.value=(B.__value="zen")==null?"":"zen",s(u),G(2),s(_),s(v);var w=a(v,2),k=a(l(w),2);Re(k),s(w),s(r),j(c,()=>e(S),$=>x(S,$)),Se(u,()=>e(O),$=>x(O,$)),j(k,()=>e(T),$=>x(T,$)),d(t,r)};b(ae,t=>{e(o)==3&&t(he)})}var be=a(ae,2);{var ye=t=>{var r=Ke(),n=l(r);{var c=u=>{var m=Ye();m.__click=[We,o];var g=l(m,!0);s(m),D(()=>{var h;return J(g,(h=H[e(o)])==null?void 0:h.prev)}),d(u,m)};b(n,u=>{e(o)>1&&u(c)})}var v=a(n,4);v.__click=[Ie,o,ie];var _=l(v,!0);s(v),s(r),D(()=>{v.disabled=!e(ve),J(_,H[e(o)].next)}),d(t,r)};b(be,t=>{e(o)>0&&t(ye)})}s(W),s(V),d(C,V),we()}Ne(["click"]);export{gt as component};
