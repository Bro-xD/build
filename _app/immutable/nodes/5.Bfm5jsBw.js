import"../chunks/Bg9kRutz.js";import{p as qe,aa as q,o as e,a as we,$ as ke,ab as a,ac as l,ad as s,ae as B,af as U,D as Ce,r as x,J as oe,ag as $e}from"../chunks/SCCXHowg.js";import{d as Ne,s as V}from"../chunks/C5uFnDi8.js";import{i as b}from"../chunks/DYuL35ex.js";import{t as p,a as d}from"../chunks/BiEH_QtQ.js";import{c as F}from"../chunks/CbBtwccj.js";import{h as je}from"../chunks/BeiIj7lT.js";import{r as R}from"../chunks/Dj7PeN45.js";import{r as Re}from"../chunks/BjT4wUkL.js";import{b as j,a as Se}from"../chunks/BtNoR3Ob.js";import{p as X}from"../chunks/DuCrL0rR.js";import{o as Oe}from"../chunks/DcgF8Xjn.js";import{C as Pe,T as H,G as Te}from"../chunks/B9cRJPy6.js";import{O as ze}from"../chunks/DTbTwHK6.js";import"../chunks/x_O8n_hi.js";import{a as le}from"../chunks/B5Ja7Ssa.js";import{u as se}from"../chunks/DDHdIOpt.js";import{g as ne}from"../chunks/CLZ_woKs.js";async function Ee(C,i,o){try{const f=await le.post("api/login",{json:{username:e(i),password:e(o)}}).json();f.success?(se.set(JSON.stringify(f.user)),ne("/profil",{replaceState:!0})):alert("Nom dâ€™utilisateur ou mot de passe incorrect")}catch(f){console.error("Erreur lors de la connexion:",f),alert("Erreur lors de la connexion")}}function Le(C,i){x(i,1)}function Me(C,i,o,f){x(i,(e(i)+1)%o.length),x(f,X(o[e(i)]))}function De(C,i,o,f){x(i,(e(i)-1+o.length)%o.length),x(f,X(o[e(i)]))}var Be=p('<span class="text-underline text-xl font-bold border-b border-gray-400 w-max  svelte-10yqqhl"> </span>'),Je=p('<span class="text-underline text-xl font-bold border-b border-gray-400 w-max  svelte-10yqqhl">CONNEXION</span> <p class="text-gray-600 text-xl">Chaisissez votre nom de rÃ©fugiÃ© et votre cle de refuge</p>',1),Ae=p('<p class="text-gray-600 text-xl">Choisis un nom de rÃ©fugiÃ© et une cle de refuge</p>'),Ge=p('<p class="text-gray-600 text-xl">Choisis le profils qui te correspond le mieux (ou pas)</p> <p class="text-xs">(Clique gauche pour tourner autour, clique droit pour deplacer la vue, scroll pour zoomer/dÃ©zoomer)</p>',1),Ue=p('<p class="text-gray-600 text-xl">CrÃ©er votre refuge</p>'),Ve=p('<div><div class="flex flex-col gap-5 w-full"><div class="flex flex-col gap-2"><label for="username" class="svelte-10yqqhl">Votre nom de RÃ©fugiÃ©</label> <input class="toon-input svelte-10yqqhl" type="text" placeholder="Nom de RÃ©fugiÃ©"></div> <div class="flex flex-col gap-2"><label for="password" class="svelte-10yqqhl">La cle de votre refuge</label> <input class="toon-input svelte-10yqqhl" type="password" placeholder="Cle de refuge"></div></div> <div class="flex justify-between mt-4"><button class="toon-button svelte-10yqqhl">Se connecter</button> <button class="toon-button svelte-10yqqhl">CrÃ©er un nouveau compte</button></div></div>'),Fe=p('<div class="flex flex-col gap-5 w-full"><div class="flex flex-col gap-2"><label for="username" class="svelte-10yqqhl">Votre nom de RÃ©fugiÃ©</label> <input class="toon-input svelte-10yqqhl" type="text" placeholder="Nom de RÃ©fugiÃ©"></div> <div class="flex flex-col gap-2"><label for="password" class="svelte-10yqqhl">La cle de votre refuge</label> <input class="toon-input svelte-10yqqhl" type="password" placeholder="Cle de refuge"></div></div>'),He=p("<!> <!> <!> <!>",1),Xe=p('<div class="flex flex-col gap-5"><div class="w-full h-[300px] flex justify-center border border-gray-400 rounded items-center relative"><!> <button class="toon-button absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 hover:text-gray-500  shadow-md p-2 rounded-full text-gray-400 svelte-10yqqhl"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <button class="toon-button absolute right-4 top-1/2 -translate-y-1/2 bg-white/80  hover:text-gray-500  shadow-md p-2 rounded-full text-gray-400 svelte-10yqqhl"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div></div>'),Ze=p(`<div class="flex flex-col gap-5 w-full"><div class="flex flex-col gap-2"><label for="refugeName" class="svelte-10yqqhl">Nom de votre refuge</label> <input class="toon-input svelte-10yqqhl" type="text" placeholder="Nom de refuge"></div> <div class="flex flex-col gap-2"><label for="vibe" class="svelte-10yqqhl">Ton Ã©tat d'esprit en entrant dans le refuge</label> <div class="relative w-max"><select class="toon-input appearance-none svelte-10yqqhl"><option disabled selected>Choisis un thÃ¨me</option><option>ðŸŽ­ Dramatique</option><option>ðŸ˜‚ Humoristique</option><option>ðŸ˜” MÃ©lancolique</option><option>ðŸ˜¬ Cringe</option><option>ðŸ§˜ Zen</option></select> <div class="absolute right-3 top-3 text-gray-500 pointer-events-none"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div> <div class="flex flex-col gap-2"><label for="story" class="font-medium svelte-10yqqhl">Un fragment de toi Ã  partager ?</label> <textarea id="story" class="toon-input min-h-[100px] svelte-10yqqhl" placeholder="Tu peux Ã©crire ce que tu ressens, ce que tu fuis, ou ce que tu espÃ¨res..."></textarea></div></div>`),Ie=(C,i)=>oe(i,-1),Ke=p('<button class="toon-button svelte-10yqqhl"> </button>'),Qe=(C,i,o)=>{e(i)===3?o():oe(i)},We=p('<div class="flex"><!> <span class="flex-grow"></span> <button class="toon-button svelte-10yqqhl"> </button></div>'),Ye=p('<div class="w-screen h-screen overflow-auto flex justify-center items-center pb-2"><div class="flex flex-col gap-5 w-[500px] max-w-[500px] max-h-[500px] "><div class="flex flex-col gap-5"><!> <!> <!> <!> <!></div> <!> <!> <!> <!> <!></div></div>');function ht(C,i){qe(i,!0);let o=q(0);const f=["/avatars/character-female-a.glb","/avatars/character-female-b.glb","/avatars/character-male-a.glb","/avatars/character-male-b.glb"];let S=q(""),O=q("drama"),P=q(""),J=q(0),T=q(X(f[e(J)])),z=q(""),E=q(""),L=q(""),M=q("");async function ie(){const t={username:e(z),password:e(E),avatar:e(T),refugeName:e(S),vibe:e(O),story:e(P)};try{const r=await le.post("api/create/refuge",{json:t}).json();console.log("Refuge crÃ©Ã© !",r),se.set(JSON.stringify(r)),ne("/profil",{replaceState:!0})}catch(r){console.error("Erreur lors de la crÃ©ation du refuge :",r)}}const Z={1:{next:"Suivant",prev:""},2:{next:"Suivant",prev:"PrÃ©cÃ©dent"},3:{next:"CrÃ©er le refuge",prev:"PrÃ©cÃ©dent"}};let ve=Ce(()=>e(o)===1?e(z).trim()!==""&&e(E).trim()!=="":e(o)===2?!0:e(o)===3?e(S).trim()!==""&&e(O)!==""&&e(P).trim()!=="":!1);Oe(()=>{});var A=Ye();je(t=>{ke.title=" Inscription "});var I=l(A),G=l(I),K=l(G);{var ue=t=>{var r=Be(),n=l(r);s(r),B(()=>V(n,`Etape ${e(o)??""}`)),d(t,r)};b(K,t=>{e(o)>0&&t(ue)})}var Q=a(K,2);{var ce=t=>{var r=Je();U(2),d(t,r)};b(Q,t=>{e(o)==0&&t(ce)})}var W=a(Q,2);{var de=t=>{var r=Ae();d(t,r)};b(W,t=>{e(o)==1&&t(de)})}var Y=a(W,2);{var pe=t=>{var r=Ge();U(2),d(t,r)};b(Y,t=>{e(o)==2&&t(pe)})}var fe=a(Y,2);{var _e=t=>{var r=Ue();d(t,r)};b(fe,t=>{e(o)==3&&t(_e)})}s(G);var ee=a(G,2);{var me=t=>{var r=Ve(),n=l(r),c=l(n),v=a(l(c),2);R(v),s(c);var _=a(c,2),u=a(l(_),2);R(u),s(_),s(n);var m=a(n,2),g=l(m);g.__click=[Ee,L,M];var h=a(g,2);h.__click=[Le,o],s(m),s(r),B(()=>g.disabled=!e(L)||!e(M)),j(v,()=>e(L),y=>x(L,y)),j(u,()=>e(M),y=>x(M,y)),d(t,r)};b(ee,t=>{e(o)===0&&t(me)})}var te=a(ee,2);{var ge=t=>{var r=Fe(),n=l(r),c=a(l(n),2);R(c),s(n);var v=a(n,2),_=a(l(v),2);R(_),s(v),s(r),j(c,()=>e(z),u=>x(z,u)),j(_,()=>e(E),u=>x(E,u)),d(t,r)};b(te,t=>{e(o)==1&&t(ge)})}var re=a(te,2);{var xe=t=>{var r=Xe(),n=l(r),c=l(n);Pe(c,{class:" bg-gray-800 rounded-xl border shadow-md",children:(u,m)=>{var g=He(),h=$e(g);F(h,()=>H.AmbientLight,(w,k)=>{k(w,{intensity:.6})});var y=a(h,2);F(y,()=>H.DirectionalLight,(w,k)=>{k(w,{position:[2,2,5],intensity:1})});var N=a(y,2);F(N,()=>H.PerspectiveCamera,(w,k)=>{k(w,{fov:25,makeDefault:!0,position:[0,1.5,3],children:($,et)=>{ze($,{target:[0,.9,0],autoRotate:!0,autoRotateSpeed:5})},$$slots:{default:!0}})});var D=a(N,2);Te(D,{get url(){return e(T)},scale:1,position:[0,.5,0]}),d(u,g)},$$slots:{default:!0}});var v=a(c,2);v.__click=[De,J,f,T];var _=a(v,2);_.__click=[Me,J,f,T],s(n),s(r),d(t,r)};b(re,t=>{e(o)==2&&t(xe)})}var ae=a(re,2);{var he=t=>{var r=Ze(),n=l(r),c=a(l(n),2);R(c),s(n);var v=a(n,2),_=a(l(v),2),u=l(_),m=l(u);m.value=((m.__value="")==null,"");var g=a(m);g.value=(g.__value="drama")==null?"":"drama";var h=a(g);h.value=(h.__value="humor")==null?"":"humor";var y=a(h);y.value=(y.__value="melancholy")==null?"":"melancholy";var N=a(y);N.value=(N.__value="cringe")==null?"":"cringe";var D=a(N);D.value=(D.__value="zen")==null?"":"zen",s(u),U(2),s(_),s(v);var w=a(v,2),k=a(l(w),2);Re(k),s(w),s(r),j(c,()=>e(S),$=>x(S,$)),Se(u,()=>e(O),$=>x(O,$)),j(k,()=>e(P),$=>x(P,$)),d(t,r)};b(ae,t=>{e(o)==3&&t(he)})}var be=a(ae,2);{var ye=t=>{var r=We(),n=l(r);{var c=u=>{var m=Ke();m.__click=[Ie,o];var g=l(m,!0);s(m),B(()=>{var h;return V(g,(h=Z[e(o)])==null?void 0:h.prev)}),d(u,m)};b(n,u=>{e(o)>1&&u(c)})}var v=a(n,4);v.__click=[Qe,o,ie];var _=l(v,!0);s(v),s(r),B(()=>{v.disabled=!e(ve),V(_,Z[e(o)].next)}),d(t,r)};b(be,t=>{e(o)>0&&t(ye)})}s(I),s(A),d(C,A),we()}Ne(["click"]);export{ht as component};
